(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7e8d510"],{"2f14":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("99af"),a("fb6a");var r=a("d4ec"),s=a("bee2"),i=function(){function t(){Object(r["a"])(this,t)}return Object(s["a"])(t,[{key:"queryString",value:function(t){var e="";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");return e.slice(0,-1)}}]),t}(),n=new i},"99af":function(t,e,a){"use strict";var r=a("23e7"),s=a("d039"),i=a("e8b5"),n=a("861d"),c=a("7b0b"),o=a("50c4"),d=a("8418"),l=a("65f0"),u=a("1dde"),f=a("b622"),v=a("2d00"),m=f("isConcatSpreadable"),_=9007199254740991,p="Maximum allowed index exceeded",C=v>=51||!s((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),h=u("concat"),b=function(t){if(!n(t))return!1;var e=t[m];return void 0!==e?!!e:i(t)},g=!C||!h;r({target:"Array",proto:!0,forced:g},{concat:function(t){var e,a,r,s,i,n=c(this),u=l(n,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?n:arguments[e],b(i)){if(s=o(i.length),f+s>_)throw TypeError(p);for(a=0;a<s;a++,f++)a in i&&d(u,f,i[a])}else{if(f>=_)throw TypeError(p);d(u,f++,i)}return u.length=f,u}})},a434:function(t,e,a){"use strict";var r=a("23e7"),s=a("23cb"),i=a("a691"),n=a("50c4"),c=a("7b0b"),o=a("65f0"),d=a("8418"),l=a("1dde"),u=a("ae40"),f=l("splice"),v=u("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,_=Math.min,p=9007199254740991,C="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!v},{splice:function(t,e){var a,r,l,u,f,v,h=c(this),b=n(h.length),g=s(t,b),y=arguments.length;if(0===y?a=r=0:1===y?(a=0,r=b-g):(a=y-2,r=_(m(i(e),0),b-g)),b+a-r>p)throw TypeError(C);for(l=o(h,r),u=0;u<r;u++)f=g+u,f in h&&d(l,u,h[f]);if(l.length=r,a<r){for(u=g;u<b-r;u++)f=u+r,v=u+a,f in h?h[v]=h[f]:delete h[v];for(u=b;u>b-r+a;u--)delete h[u-1]}else if(a>r)for(u=b-r;u>g;u--)f=u+r-1,v=u+a-1,f in h?h[v]=h[f]:delete h[v];for(u=0;u<a;u++)h[u+g]=arguments[u+2];return h.length=b-r+a,l}})},be7a:function(t,e,a){},bee2:function(t,e,a){"use strict";function r(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,a){return e&&r(t.prototype,e),a&&r(t,a),t}a.d(e,"a",(function(){return s}))},cf2a:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.back}}),a("div",{staticClass:"content"},[a("van-tabs",{attrs:{sticky:"","offset-top":"46"},on:{change:t.toggleTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("van-tab",{attrs:{title:"全部订单",name:"0"}},t._l(t.orderDatas,(function(e,r){return a("div",{key:r,staticClass:"order-box"},[a("div",{staticClass:"order-top clearfix"},[a("div",{staticClass:"order-no fl"},[t._v(t._s(e.oid))]),a("div",{staticClass:"order-status fr"},[t._v(t._s(1==e.status?"待收货":"已完成"))])]),a("div",{staticClass:"order-middle"},t._l(e.products,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("div",{staticClass:"item-left"},[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),a("div",{staticClass:"rule"},[t._v(t._s(e.rule))])]),a("div",{staticClass:"count"},[t._v("x"+t._s(e.count))]),a("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))])])})),0),a("div",{staticClass:"order-bottom"},[a("div",{staticClass:"order-total-box clearfix"},[a("div",{staticClass:"order-count fl"},[t._v("共计 "+t._s(e.count)+" 件商品")]),a("div",{staticClass:"order-price fr"},[t._v("合计￥"+t._s(e.totalPrice))])]),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"order-time fl"},[t._v(" "+t._s(t._f("formatDate")(e.createdAt,"yyyy-MM-dd hh:mm:ss"))+" ")]),1==e.status?a("div",{staticClass:"receive-btn fr",on:{click:function(a){return t.handleOrder("./receive",e.oid,r)}}},[t._v("确认收货")]):a("van-icon",{staticClass:"delete-btn fr",attrs:{name:"delete"},on:{click:function(a){return t.showDeleteDialog("./removeOrder",e.oid,r)}}})],1)])])})),0),a("van-tab",{attrs:{title:"待收货",name:"1"}},t._l(t.orderDatas,(function(e,r){return a("div",{key:r,staticClass:"order-box"},[a("div",{staticClass:"order-top clearfix"},[a("div",{staticClass:"order-no fl"},[t._v(t._s(e.oid))]),a("div",{staticClass:"order-status fr"},[t._v(t._s(1==e.status?"待收货":"已完成"))])]),a("div",{staticClass:"order-middle"},t._l(e.products,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("div",{staticClass:"item-left"},[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),a("div",{staticClass:"rule"},[t._v(t._s(e.rule))])]),a("div",{staticClass:"count"},[t._v("x"+t._s(e.count))]),a("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))])])})),0),a("div",{staticClass:"order-bottom"},[a("div",{staticClass:"order-total-box clearfix"},[a("div",{staticClass:"order-count fl"},[t._v("共计 "+t._s(e.count)+" 件商品")]),a("div",{staticClass:"order-price fr"},[t._v("合计￥"+t._s(e.totalPrice))])]),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"order-time fl"},[t._v(" "+t._s(t._f("formatDate")(e.createdAt,"yyyy-MM-dd hh:mm:ss"))+" ")]),1==e.status?a("div",{staticClass:"receive-btn fr",on:{click:function(a){return t.handleOrder("./receive",e.oid,r)}}},[t._v("确认收货")]):a("van-icon",{staticClass:"delete-btn fr",attrs:{name:"delete"},on:{click:function(a){return t.handleOrder("./removeOrder",e.oid,r)}}})],1)])])})),0),a("van-tab",{attrs:{title:"已收货",name:"2"}},t._l(t.orderDatas,(function(e,r){return a("div",{key:r,staticClass:"order-box"},[a("div",{staticClass:"order-top clearfix"},[a("div",{staticClass:"order-no fl"},[t._v(t._s(e.oid))]),a("div",{staticClass:"order-status fr"},[t._v(t._s(1==e.status?"待收货":"已完成"))])]),a("div",{staticClass:"order-middle"},t._l(e.products,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("div",{staticClass:"item-left"},[a("div",{staticClass:"name"},[t._v(t._s(e.name))]),a("div",{staticClass:"rule"},[t._v(t._s(e.rule))])]),a("div",{staticClass:"count"},[t._v("x"+t._s(e.count))]),a("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))])])})),0),a("div",{staticClass:"order-bottom"},[a("div",{staticClass:"order-total-box clearfix"},[a("div",{staticClass:"order-count fl"},[t._v("共计 "+t._s(e.count)+" 件商品")]),a("div",{staticClass:"order-price fr"},[t._v("合计￥"+t._s(e.totalPrice))])]),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"order-time fl"},[t._v(" "+t._s(t._f("formatDate")(e.createdAt,"yyyy-MM-dd hh:mm:ss"))+" ")]),1==e.status?a("div",{staticClass:"receive-btn fr",on:{click:function(a){return t.handleOrder("./receive",e.oid,r)}}},[t._v("确认收货")]):a("van-icon",{staticClass:"delete-btn fr",attrs:{name:"delete"},on:{click:function(a){return t.handleOrder("./removeOrder",e.oid,r)}}})],1)])])})),0)],1),0==t.orderDatas.length?a("van-empty",{staticClass:"custom-image",attrs:{image:"https://img.yzcdn.cn/vant/custom-empty-image.png",description:"没有相关的订单"}}):t._e()],1)],1)},s=[],i=(a("d81d"),a("a434"),a("be7a"),a("2f14")),n={data:function(){return{activeName:"0",orderDatas:[]}},created:function(){this.getOrderData(0)},methods:{back:function(){this.$router.push({name:"My"})},getOrderData:function(t){var e=this,a=localStorage.getItem("CSTK");a&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.orderDatas=[],this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:a,status:t}}).then((function(t){if(e.$toast.clear(),7e4==t.data.code){var a={};for(var r in t.data.result.map((function(t){a[t.oid]?(a[t.oid].products.push(t),a[t.oid].totalPrice+=t.count*t.price,a[t.oid].count+=t.count):a[t.oid]={oid:t.oid,createdAt:t.createdAt,address:t.address,receiver:t.receiver,totalPrice:t.count*t.price,count:t.count,products:[t],status:t.status}})),a)e.orderDatas.push(a[r]);e.orderDatas.sort((function(t,e){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()}))}})).catch((function(t){e.$toast.clear()})))},toggleTab:function(t,e){this.getOrderData(t)},handleOrder:function(t,e,a){var r=this,s=localStorage.getItem("CSTK");if(s){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var n=i["a"].queryString({appkey:this.appkey,tokenString:s,oid:e});this.axios({method:"POST",url:t,data:n}).then((function(t){r.$toast.clear(),r.$toast(t.data.msg),8e4==t.data.code&&(r.orderDatas[a].status=2),9e4==t.data.code&&r.orderDatas.splice(a,1)})).catch((function(t){r.$toast.clear()}))}},showDeleteDialog:function(t,e,a){var r=this;this.$dialog.confirm({message:"确定要删除订单吗？"}).then((function(){r.handleOrder(t,e,a)})).catch((function(){}))}}},c=n,o=a("2877"),d=Object(o["a"])(c,r,s,!1,null,null,null);e["default"]=d.exports},d4ec:function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",(function(){return r}))},d81d:function(t,e,a){"use strict";var r=a("23e7"),s=a("b727").map,i=a("1dde"),n=a("ae40"),c=i("map"),o=n("map");r({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-f7e8d510.7230b28f.js.map