(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-664fe55a"],{"2f14":function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));o("99af"),o("fb6a");var a=o("d4ec"),s=o("bee2"),n=function(){function t(){Object(a["a"])(this,t)}return Object(s["a"])(t,[{key:"queryString",value:function(t){var e="";for(var o in t)e+="".concat(o,"=").concat(t[o],"&");return e.slice(0,-1)}}]),t}(),r=new n},"305b":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"secure"},[o("van-nav-bar",{attrs:{"left-text":"返回",title:"安全中心","left-arrow":""},on:{"click-left":t.back}}),o("div",{staticClass:"content"},[o("van-cell",{attrs:{"is-link":""},on:{click:t.showModifyPasswordPopup}},[t._v("修改密码")]),o("van-cell",{attrs:{"is-link":""},on:{click:t.showDestroyDialog}},[t._v("注销账号")])],1),o("van-popup",{style:{height:"60%"},attrs:{closeable:"",round:"",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("div",{staticClass:"form-box"},[o("van-form",[o("div",{staticClass:"title"},[t._v("修改密码")]),o("van-field",{attrs:{label:"旧密码",placeholder:"6-12位由数字和字母组成的字符",type:t.isOldPassword?"password":"text","right-icon":t.isOldPassword?"closed-eye":"eye-o"},on:{"click-right-icon":t.viewOldPassword},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}}),o("van-field",{attrs:{label:"新密码",placeholder:"6-12位由数字和字母组成的字符",type:t.isNewPassword?"password":"text","right-icon":t.isNewPassword?"closed-eye":"eye-o"},on:{"click-right-icon":t.viewNewPassword},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),o("div",{staticClass:"btns-box"},[o("van-button",{staticClass:"btn",attrs:{block:"","native-type":"submit"},on:{click:t.updatePassword}},[t._v(" 确 认 ")])],1)],1)],1)])],1)},s=[],n=o("e3a8"),r=o("2f14"),i=(o("d42c"),{data:function(){return{show:!1,oldPassword:"",newPassword:"",isOldPassword:!0,isNewPassword:!0}},methods:{back:function(){this.$router.go(-1)},viewOldPassword:function(){this.isOldPassword=!this.isOldPassword},viewNewPassword:function(){this.isNewPassword=!this.isNewPassword},showModifyPasswordPopup:function(){this.show=!0},updatePassword:function(){var t=this,e=localStorage.getItem("CSTK");if(e){var o={oldPassword:{value:this.oldPassword,reg:/^(?![0-9]+$)(?![a-zA-Z]+$)[a-zA-z0-9]{6,12}$/,errorMsg:"旧密码格式不正确"},newPassword:{value:this.newPassword,reg:/^(?![0-9]+$)(?![a-zA-Z]+$)[a-zA-z0-9]{6,12}$/,errorMsg:"新密码格式不正确"}};if(n["a"].valid(o)){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var a=r["a"].queryString({appkey:this.appkey,tokenString:e,password:this.newPassword,oldPassword:this.oldPassword});this.axios({method:"POST",url:"/updatePassword",data:a}).then((function(e){t.$toast.clear(),"E001"==e.data.code?(t.$toast.success(e.data.msg),t.show=!1,setTimeout((function(){t.$router.push({name:"Login"})}),1e3)):t.$toast.fail(e.data.msg)})).catch((function(e){t.$toast.clear()}))}}},destroyAccount:function(){var t=this,e=localStorage.getItem("CSTK");if(e){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var o=r["a"].queryString({appkey:this.appkey,tokenString:e});this.axios({method:"POST",url:"/destroyAccount",data:o}).then((function(e){t.$toast.clear(),t.$toast(e.data.msg),"G001"==e.data.code&&(localStorage.removeItem("CSTK"),setTimeout((function(){t.$router.push({name:"Login"})}),1e3))})).catch((function(e){t.$toast.clear()}))}},showDestroyDialog:function(){var t=this;this.$dialog.confirm({message:"确定要注销账号吗？一旦注销无法恢复"}).then((function(){t.destroyAccount()})).catch((function(){}))}}}),c=i,d=o("2877"),l=Object(d["a"])(c,a,s,!1,null,null,null);e["default"]=l.exports},"99af":function(t,e,o){"use strict";var a=o("23e7"),s=o("d039"),n=o("e8b5"),r=o("861d"),i=o("7b0b"),c=o("50c4"),d=o("8418"),l=o("65f0"),u=o("1dde"),f=o("b622"),w=o("2d00"),h=f("isConcatSpreadable"),v=9007199254740991,p="Maximum allowed index exceeded",b=w>=51||!s((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=u("concat"),P=function(t){if(!r(t))return!1;var e=t[h];return void 0!==e?!!e:n(t)},y=!b||!g;a({target:"Array",proto:!0,forced:y},{concat:function(t){var e,o,a,s,n,r=i(this),u=l(r,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(n=-1===e?r:arguments[e],P(n)){if(s=c(n.length),f+s>v)throw TypeError(p);for(o=0;o<s;o++,f++)o in n&&d(u,f,n[o])}else{if(f>=v)throw TypeError(p);d(u,f++,n)}return u.length=f,u}})},bee2:function(t,e,o){"use strict";function a(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}o.d(e,"a",(function(){return s}))},d42c:function(t,e,o){},d4ec:function(t,e,o){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}o.d(e,"a",(function(){return a}))},e3a8:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var a=o("d4ec"),s=o("bee2"),n=(o("23b9"),o("8571")),r=o("2b0e");r["a"].use(n["a"]);var i=function(){function t(){Object(a["a"])(this,t)}return Object(s["a"])(t,[{key:"valid",value:function(t){for(var e in t)if(!t[e].reg.test(t[e].value))return Object(n["a"])(t[e].errorMsg),!1;return!0}}]),t}(),c=new i}}]);
//# sourceMappingURL=chunk-664fe55a.bc6c65d4.js.map